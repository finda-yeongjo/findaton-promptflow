$schema: https://azuremlschemas.azureedge.net/promptflow/latest/Flow.schema.json
environment:
  python_requirements_txt: requirements.txt
inputs:
  url:
    type: string
    default: 가장 높은 액수를 3개 뽑아줘
outputs:
  aiSearchOutput:
    type: string
    reference: ${get_value_from_ai_search.output}
  aiReultData:
    type: string
    reference: ${result_data.output}
nodes:
- name: get_user_recommend_to_json
  type: llm
  source:
    type: code
    path: get_user_recommend_to_json.jinja2
  inputs:
    deployment_name: my-gpt-4-love-donggyun
    max_tokens: 128
    temperature: 0.2
    user_request: ${inputs.url}
  connection: HOTBOARD
  api: chat
- name: get_value_from_ai_search
  type: python
  source:
    type: code
    path: get_value_from_ai_search.py
  inputs:
    data: ${get_user_recommend_to_json.output}
- name: classify_with_llm
  type: llm
  source:
    type: code
    path: classify_with_llm.jinja2
  inputs:
    deployment_name: gpt-35-turbo
    model: gpt-3.5-turbo
    max_tokens: 1000
    temperature: 0.2
    search_query_data: ${get_value_from_ai_search.output}
  connection: HOTBOARD
  api: chat
- name: result_data
  type: python
  source:
    type: code
    path: result_data.py
  inputs:
    data: ${classify_with_llm.output}
